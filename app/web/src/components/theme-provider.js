"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.useTheme = void 0;
exports.ThemeProvider = ThemeProvider;
const react_1 = require("react");
const initialState = {
    theme: "system",
    setTheme: () => null,
};
const ThemeProviderContext = (0, react_1.createContext)(initialState);
function ThemeProvider({ children, defaultTheme = "system", storageKey = "vite-ui-theme", ...props }) {
    const [theme, setTheme] = (0, react_1.useState)(() => localStorage.getItem(storageKey) || defaultTheme);
    (0, react_1.useEffect)(() => {
        const root = window.document.documentElement;
        root.classList.remove("light", "dark");
        if (theme === "system") {
            const systemTheme = window.matchMedia("(prefers-color-scheme: dark)")
                .matches
                ? "dark"
                : "light";
            root.classList.add(systemTheme);
            return;
        }
        root.classList.add(theme);
    }, [theme]);
    const value = {
        theme,
        setTheme: (theme) => {
            localStorage.setItem(storageKey, theme);
            setTheme(theme);
        },
    };
    return (<ThemeProviderContext.Provider {...props} value={value}>
      {children}
    </ThemeProviderContext.Provider>);
}
const useTheme = () => {
    const context = (0, react_1.useContext)(ThemeProviderContext);
    if (context === undefined)
        throw new Error("useTheme must be used within a ThemeProvider");
    return context;
};
exports.useTheme = useTheme;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGhlbWUtcHJvdmlkZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJ0aGVtZS1wcm92aWRlci50c3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBc0JBLHNDQXlDQztBQS9ERCxpQ0FBdUU7QUFldkUsTUFBTSxZQUFZLEdBQXVCO0lBQ3ZDLEtBQUssRUFBRSxRQUFRO0lBQ2YsUUFBUSxFQUFFLEdBQUcsRUFBRSxDQUFDLElBQUk7Q0FDckIsQ0FBQztBQUVGLE1BQU0sb0JBQW9CLEdBQUcsSUFBQSxxQkFBYSxFQUFxQixZQUFZLENBQUMsQ0FBQztBQUU3RSxTQUFnQixhQUFhLENBQUMsRUFDNUIsUUFBUSxFQUNSLFlBQVksR0FBRyxRQUFRLEVBQ3ZCLFVBQVUsR0FBRyxlQUFlLEVBQzVCLEdBQUcsS0FBSyxFQUNXO0lBQ25CLE1BQU0sQ0FBQyxLQUFLLEVBQUUsUUFBUSxDQUFDLEdBQUcsSUFBQSxnQkFBUSxFQUNoQyxHQUFHLEVBQUUsQ0FBRSxZQUFZLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBVyxJQUFJLFlBQVksQ0FDbEUsQ0FBQztJQUVGLElBQUEsaUJBQVMsRUFBQyxHQUFHLEVBQUU7UUFDYixNQUFNLElBQUksR0FBRyxNQUFNLENBQUMsUUFBUSxDQUFDLGVBQWUsQ0FBQztRQUU3QyxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxPQUFPLEVBQUUsTUFBTSxDQUFDLENBQUM7UUFFdkMsSUFBSSxLQUFLLEtBQUssUUFBUSxFQUFFLENBQUM7WUFDdkIsTUFBTSxXQUFXLEdBQUcsTUFBTSxDQUFDLFVBQVUsQ0FBQyw4QkFBOEIsQ0FBQztpQkFDbEUsT0FBTztnQkFDUixDQUFDLENBQUMsTUFBTTtnQkFDUixDQUFDLENBQUMsT0FBTyxDQUFDO1lBRVosSUFBSSxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsV0FBVyxDQUFDLENBQUM7WUFDaEMsT0FBTztRQUNULENBQUM7UUFFRCxJQUFJLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUM1QixDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO0lBRVosTUFBTSxLQUFLLEdBQUc7UUFDWixLQUFLO1FBQ0wsUUFBUSxFQUFFLENBQUMsS0FBWSxFQUFFLEVBQUU7WUFDekIsWUFBWSxDQUFDLE9BQU8sQ0FBQyxVQUFVLEVBQUUsS0FBSyxDQUFDLENBQUM7WUFDeEMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ2xCLENBQUM7S0FDRixDQUFDO0lBRUYsT0FBTyxDQUNMLENBQUMsb0JBQW9CLENBQUMsUUFBUSxDQUFDLElBQUksS0FBSyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQ3JEO01BQUEsQ0FBQyxRQUFRLENBQ1g7SUFBQSxFQUFFLG9CQUFvQixDQUFDLFFBQVEsQ0FBQyxDQUNqQyxDQUFDO0FBQ0osQ0FBQztBQUVNLE1BQU0sUUFBUSxHQUFHLEdBQUcsRUFBRTtJQUMzQixNQUFNLE9BQU8sR0FBRyxJQUFBLGtCQUFVLEVBQUMsb0JBQW9CLENBQUMsQ0FBQztJQUVqRCxJQUFJLE9BQU8sS0FBSyxTQUFTO1FBQ3ZCLE1BQU0sSUFBSSxLQUFLLENBQUMsOENBQThDLENBQUMsQ0FBQztJQUVsRSxPQUFPLE9BQU8sQ0FBQztBQUNqQixDQUFDLENBQUM7QUFQVyxRQUFBLFFBQVEsWUFPbkIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVDb250ZXh0LCB1c2VDb250ZXh0LCB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCI7XG5cbnR5cGUgVGhlbWUgPSBcImRhcmtcIiB8IFwibGlnaHRcIiB8IFwic3lzdGVtXCI7XG5cbnR5cGUgVGhlbWVQcm92aWRlclByb3BzID0ge1xuICBjaGlsZHJlbjogUmVhY3QuUmVhY3ROb2RlO1xuICBkZWZhdWx0VGhlbWU/OiBUaGVtZTtcbiAgc3RvcmFnZUtleT86IHN0cmluZztcbn07XG5cbnR5cGUgVGhlbWVQcm92aWRlclN0YXRlID0ge1xuICB0aGVtZTogVGhlbWU7XG4gIHNldFRoZW1lOiAodGhlbWU6IFRoZW1lKSA9PiB2b2lkO1xufTtcblxuY29uc3QgaW5pdGlhbFN0YXRlOiBUaGVtZVByb3ZpZGVyU3RhdGUgPSB7XG4gIHRoZW1lOiBcInN5c3RlbVwiLFxuICBzZXRUaGVtZTogKCkgPT4gbnVsbCxcbn07XG5cbmNvbnN0IFRoZW1lUHJvdmlkZXJDb250ZXh0ID0gY3JlYXRlQ29udGV4dDxUaGVtZVByb3ZpZGVyU3RhdGU+KGluaXRpYWxTdGF0ZSk7XG5cbmV4cG9ydCBmdW5jdGlvbiBUaGVtZVByb3ZpZGVyKHtcbiAgY2hpbGRyZW4sXG4gIGRlZmF1bHRUaGVtZSA9IFwic3lzdGVtXCIsXG4gIHN0b3JhZ2VLZXkgPSBcInZpdGUtdWktdGhlbWVcIixcbiAgLi4ucHJvcHNcbn06IFRoZW1lUHJvdmlkZXJQcm9wcykge1xuICBjb25zdCBbdGhlbWUsIHNldFRoZW1lXSA9IHVzZVN0YXRlPFRoZW1lPihcbiAgICAoKSA9PiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oc3RvcmFnZUtleSkgYXMgVGhlbWUpIHx8IGRlZmF1bHRUaGVtZVxuICApO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3Qgcm9vdCA9IHdpbmRvdy5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG5cbiAgICByb290LmNsYXNzTGlzdC5yZW1vdmUoXCJsaWdodFwiLCBcImRhcmtcIik7XG5cbiAgICBpZiAodGhlbWUgPT09IFwic3lzdGVtXCIpIHtcbiAgICAgIGNvbnN0IHN5c3RlbVRoZW1lID0gd2luZG93Lm1hdGNoTWVkaWEoXCIocHJlZmVycy1jb2xvci1zY2hlbWU6IGRhcmspXCIpXG4gICAgICAgIC5tYXRjaGVzXG4gICAgICAgID8gXCJkYXJrXCJcbiAgICAgICAgOiBcImxpZ2h0XCI7XG5cbiAgICAgIHJvb3QuY2xhc3NMaXN0LmFkZChzeXN0ZW1UaGVtZSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgcm9vdC5jbGFzc0xpc3QuYWRkKHRoZW1lKTtcbiAgfSwgW3RoZW1lXSk7XG5cbiAgY29uc3QgdmFsdWUgPSB7XG4gICAgdGhlbWUsXG4gICAgc2V0VGhlbWU6ICh0aGVtZTogVGhlbWUpID0+IHtcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKHN0b3JhZ2VLZXksIHRoZW1lKTtcbiAgICAgIHNldFRoZW1lKHRoZW1lKTtcbiAgICB9LFxuICB9O1xuXG4gIHJldHVybiAoXG4gICAgPFRoZW1lUHJvdmlkZXJDb250ZXh0LlByb3ZpZGVyIHsuLi5wcm9wc30gdmFsdWU9e3ZhbHVlfT5cbiAgICAgIHtjaGlsZHJlbn1cbiAgICA8L1RoZW1lUHJvdmlkZXJDb250ZXh0LlByb3ZpZGVyPlxuICApO1xufVxuXG5leHBvcnQgY29uc3QgdXNlVGhlbWUgPSAoKSA9PiB7XG4gIGNvbnN0IGNvbnRleHQgPSB1c2VDb250ZXh0KFRoZW1lUHJvdmlkZXJDb250ZXh0KTtcblxuICBpZiAoY29udGV4dCA9PT0gdW5kZWZpbmVkKVxuICAgIHRocm93IG5ldyBFcnJvcihcInVzZVRoZW1lIG11c3QgYmUgdXNlZCB3aXRoaW4gYSBUaGVtZVByb3ZpZGVyXCIpO1xuXG4gIHJldHVybiBjb250ZXh0O1xufTtcbiJdfQ==