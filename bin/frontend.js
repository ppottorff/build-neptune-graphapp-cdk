#!/usr/bin/env node
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
require("source-map-support/register");
const cdk = require("aws-cdk-lib");
const cdk_nag_1 = require("cdk-nag");
const webapp_stack_1 = require("../lib/webapp-stack");
const config_1 = require("../config");
const NagLogger_1 = require("../nag/NagLogger");
const app = new cdk.App();
const logger = new NagLogger_1.NagLogger();
cdk.Aspects.of(app).add(new cdk_nag_1.AwsSolutionsChecks({ verbose: true, additionalLoggers: [logger] }));
const appName = config_1.deployConfig.appName || "graphApp";
const env = {
    account: process.env.CDK_DEFAULT_ACCOUNT,
    region: config_1.deployConfig.region || process.env.CDK_DEFAULT_REGION,
};
const web = new webapp_stack_1.WebappStack(app, `${appName}-WebappStack`, {
    wafParamName: config_1.deployConfig.wafParamName,
    webBucketsRemovalPolicy: config_1.deployConfig.webBucketsRemovalPolicy,
    env,
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZnJvbnRlbmQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJmcm9udGVuZC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFDQSx1Q0FBcUM7QUFDckMsbUNBQW1DO0FBQ25DLHFDQUE2QztBQUM3QyxzREFBa0Q7QUFFbEQsc0NBQXlDO0FBQ3pDLGdEQUE2QztBQUU3QyxNQUFNLEdBQUcsR0FBRyxJQUFJLEdBQUcsQ0FBQyxHQUFHLEVBQUUsQ0FBQztBQUMxQixNQUFNLE1BQU0sR0FBRyxJQUFJLHFCQUFTLEVBQUUsQ0FBQztBQUUvQixHQUFHLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQ3JCLElBQUksNEJBQWtCLENBQUMsRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLGlCQUFpQixFQUFFLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxDQUN2RSxDQUFDO0FBQ0YsTUFBTSxPQUFPLEdBQUcscUJBQVksQ0FBQyxPQUFPLElBQUksVUFBVSxDQUFDO0FBQ25ELE1BQU0sR0FBRyxHQUFHO0lBQ1YsT0FBTyxFQUFFLE9BQU8sQ0FBQyxHQUFHLENBQUMsbUJBQW1CO0lBQ3hDLE1BQU0sRUFBRSxxQkFBWSxDQUFDLE1BQU0sSUFBSSxPQUFPLENBQUMsR0FBRyxDQUFDLGtCQUFrQjtDQUM5RCxDQUFDO0FBRUYsTUFBTSxHQUFHLEdBQUcsSUFBSSwwQkFBVyxDQUFDLEdBQUcsRUFBRSxHQUFHLE9BQU8sY0FBYyxFQUFFO0lBQ3pELFlBQVksRUFBRSxxQkFBWSxDQUFDLFlBQVk7SUFDdkMsdUJBQXVCLEVBQUUscUJBQVksQ0FBQyx1QkFBdUI7SUFDN0QsR0FBRztDQUNKLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIiMhL3Vzci9iaW4vZW52IG5vZGVcbmltcG9ydCBcInNvdXJjZS1tYXAtc3VwcG9ydC9yZWdpc3RlclwiO1xuaW1wb3J0ICogYXMgY2RrIGZyb20gXCJhd3MtY2RrLWxpYlwiO1xuaW1wb3J0IHsgQXdzU29sdXRpb25zQ2hlY2tzIH0gZnJvbSBcImNkay1uYWdcIjtcbmltcG9ydCB7IFdlYmFwcFN0YWNrIH0gZnJvbSBcIi4uL2xpYi93ZWJhcHAtc3RhY2tcIjtcblxuaW1wb3J0IHsgZGVwbG95Q29uZmlnIH0gZnJvbSBcIi4uL2NvbmZpZ1wiO1xuaW1wb3J0IHsgTmFnTG9nZ2VyIH0gZnJvbSBcIi4uL25hZy9OYWdMb2dnZXJcIjtcblxuY29uc3QgYXBwID0gbmV3IGNkay5BcHAoKTtcbmNvbnN0IGxvZ2dlciA9IG5ldyBOYWdMb2dnZXIoKTtcblxuY2RrLkFzcGVjdHMub2YoYXBwKS5hZGQoXG4gIG5ldyBBd3NTb2x1dGlvbnNDaGVja3MoeyB2ZXJib3NlOiB0cnVlLCBhZGRpdGlvbmFsTG9nZ2VyczogW2xvZ2dlcl0gfSlcbik7XG5jb25zdCBhcHBOYW1lID0gZGVwbG95Q29uZmlnLmFwcE5hbWUgfHwgXCJncmFwaEFwcFwiO1xuY29uc3QgZW52ID0ge1xuICBhY2NvdW50OiBwcm9jZXNzLmVudi5DREtfREVGQVVMVF9BQ0NPVU5ULFxuICByZWdpb246IGRlcGxveUNvbmZpZy5yZWdpb24gfHwgcHJvY2Vzcy5lbnYuQ0RLX0RFRkFVTFRfUkVHSU9OLFxufTtcblxuY29uc3Qgd2ViID0gbmV3IFdlYmFwcFN0YWNrKGFwcCwgYCR7YXBwTmFtZX0tV2ViYXBwU3RhY2tgLCB7XG4gIHdhZlBhcmFtTmFtZTogZGVwbG95Q29uZmlnLndhZlBhcmFtTmFtZSxcbiAgd2ViQnVja2V0c1JlbW92YWxQb2xpY3k6IGRlcGxveUNvbmZpZy53ZWJCdWNrZXRzUmVtb3ZhbFBvbGljeSxcbiAgZW52LFxufSk7XG4iXX0=